---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# xsdmMle

<!-- badges: start -->
<!-- badges: end -->

The goal of xsdmMle is to fit 

## Installation

You can install the development version of xsdmMle from [GitHub](https://github.com/) with:

``` r
# install.packages("remotes")
remotes::install_github("alrobles/xsdmMle")
```

## Example

This is a basic example to fit the distribution of a species:


```{r example-1}
library(xsdmMle)
## 01 We read the rasters for our example

bio1_ts <- terra::unwrap(cmcc_cm_bio1)
bio12_ts <- terra::unwrap(cmcc_cm_bio12)

# 02 We transform the raster of precipitation to a similar scale of temperature
bio12_ts <- bio12_ts / 100

# 03 We create a list of raster time series
envData <- list(bio1 = bio1_ts, bio12 = bio12_ts)

# 04 we create a data array providing the list of environmental data and the occurence
# data frame (sp_virtual_example)
envdat <- env_data_array(envData, occ = sp_virtual_example)
```

Following this we fit using the function optim_mll:

```{r example-2}
# 01 We store the presence absence vector
occ <- sp_virtual_example$presence

# 03 Then we provide the environmental data array and the occ vector in the optim_mll.
# We can set parameters here like the number of initial points, or the flag if
# we want to run in parallel
optim_df <- optim_mll(envdat, occ, numstarts = 50, parallel = TRUE)
```
```

Then we got a data frame with the maximum likelihood estimation for each set of 
initial starting points in the optimization. We have this on the biological scale of
parameters (Is the unconstrained space of parameters where the optimizer found the maximum of the function).
